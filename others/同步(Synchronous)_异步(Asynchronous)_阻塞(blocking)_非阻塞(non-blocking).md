## 不严谨的定义

### 同步和异步

同步和异步关注的是**消息通信机制** (synchronous communication/ asynchronous communication)
所谓同步，就是在发出一个**调用** 时，在没有得到结果之前，该**调用** 就不返回。但是一旦调用返回，就得到返回值了。
换句话说，就是由**调用者**主动等待这个**调用**的结果。

而异步则是相反，***调用\*在发出之后，这个调用就直接返回了，所以没有返回结果**。换句话说，当一个异步过程调用发出后，调用者不会立刻得到结果。而是在**调用**发出后，**被调用者**通过状态、通知来通知调用者，或通过回调函数处理这个调用。

**通俗的例子：**
你打电话问书店老板有没有《分布式系统》这本书，如果是同步通信机制，书店老板会说，你稍等，”我查一下"，然后开始查啊查，等查好了（可能是5秒，也可能是一天）告诉你结果（返回结果）。
而异步通信机制，书店老板直接告诉你我查一下啊，查好了打电话给你，然后直接挂电话了（不返回结果）。然后查好了，他会主动打电话给你。在这里老板通过“回电”这种方式来回调 (callback)。

### 阻塞与非阻塞
阻塞和非阻塞关注的是**程序在等待调用结果（消息，返回值）时的状态.**

阻塞调用是指调用结果返回之前，当前线程会被挂起。调用线程只有在得到结果之后才会返回。
非阻塞调用指在不能立刻得到结果之前，该调用不会阻塞当前线程。

**延续之前的例子**
你打电话问书店老板有没有《分布式系统》这本书，如果是阻塞式调用，你会一直把自己“挂起”，直到得到这本书有没有的结果；如果是非阻塞式调用，你不管老板有没有告诉你，你自己先一边去玩了， 当然你也要偶尔过几分钟check一下老板有没有返回结果（这里就是偶尔询问，轮询的意思）。
在这里阻塞与非阻塞与是否同步异步无关。跟老板通过什么方式回答你结果无关。



## 总结

1. 阻塞与非阻塞表示 **我** 在买书过程中  **可能出现的状态**，是从 **我** 这个单进程角度来看待这个买书这个问题；同步异步表示一种**协作方式**，是从全局更高的角度 “**进程之间 合作的方式”** 来看待买书这个业务。两个进程之间如果商量采用异步方式处理买书这一业务，就不存在阻塞这种状态。




2. 同步不同步，阻塞不阻塞，这两个概念是互相独立的（orthogonal），也就是说他们的组合一共可以有四种情况：
   - 同步+阻塞
   - 同步+非阻塞
   - 异步+阻塞（几乎不会采用）
   - 异步+非阻塞

3. asynchronous 基本和non-blocking是等价的，异步基本上都是非阻塞的。我们只有在同步的时候才会考虑是采用阻塞还是非阻塞的方式。



## lyw的理解

我们平时都是写同步+阻塞的代码。main()里调用f()，程序要等f()结束，再顺序执行。
异步+非阻塞。调用f()之后不等返回值，main就直接往下执行了；f()因为是异步的，可能直接就返回了NULL，然后之后等到f()真正执行完了再通知main()
同步+非阻塞。调用f()之后不等返回值，main就直接往下执行了。但是main还需要在后续的执行中偶尔查看一下f()是否已经返回（可能是轮训）

所以异步就是异步+非阻塞，阻塞就是同步+阻塞？

## 参考资料

- 怎样理解阻塞非阻塞与同步异步的区别？ - 严肃的回答 - 知乎 
  https://www.zhihu.com/question/19732473/answer/20851256

  提供了**买书**的例子

- 怎样理解阻塞非阻塞与同步异步的区别？ - Shihui wang的回答 - 知乎  
    https://www.zhihu.com/question/19732473/answer/14413599

    阻塞/非阻塞是当前进程的角度；同步/异步是从进程之间合作的角度来看。

- 同步异步，阻塞和非阻塞该怎样理解？ - 牛传欣的回答 - 知乎  
  https://www.zhihu.com/question/267866765/answer/507642794

  同步不同步，阻塞不阻塞，这两个概念是互相独立的（orthogonal）

- 同步异步，阻塞和非阻塞该怎样理解？ - ryx的回答 - 知乎  
  https://www.zhihu.com/question/267866765/answer/520248942

  异步≈非阻塞

- 

